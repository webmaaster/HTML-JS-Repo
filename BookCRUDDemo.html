<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<h1>ADD A BOOK</h1>
<label for="bookTitle">Title : </label>
<input type="text" id="bookTitle"/>
<label for="bookAuthor">Author : </label>
<input type="text" id="bookAuthor"/>
<label for="bookGenre">Genre : </label>
<input type="text" id="bookGenre"/>
<label for="bookCost">Cost : </label>
<input type="text" id="bookCost"/>
<button type="button" onclick="addBook()">ADD BOOK</button>
<h1>LIST OF BOOKS</h1>
<table id="bookDisplay" border=1>
<script>
var allBooks = [
	{
		id: 101,
		book_title: "Harry Potter and the Prisoner of Azkaban",
		book_author: "J.K.Rowling",
		book_genre: "Fiction",
		book_cost: 20,
		book_image_url: "",
		book_removed: false
	},
	{
		id: 102,
		book_title: "Harry Potter and the Goblet of Fire",
		book_author: "J.K.Rowling",
		book_genre: "Fiction",
		book_cost: 25,
		book_image_url: "",
		book_removed: false
	},
	{
		id: 103,
		book_title: "Harry Potter and the Half Blood Prince",
		book_author: "J.K.Rowling",
		book_genre: "Fiction",
		book_cost: 40,
		book_image_url: "",
		book_removed: false
	}
];

// wrapped this code into a function so that we can reload the data again
function loadBook(){
	document.getElementById("bookDisplay").innerHTML = `<tr>
		<th>ID</th>
		<th>BOOK TITLE</th>
		<th>BOOK AUTHOR</th>
		<th>BOOK GENRE</th>
		<th>BOOK COST</th>
		<th></th>
		<th></th>
	</tr>`;

	allBooks.forEach((book)=>{
	document.getElementById("bookDisplay").innerHTML += `
		<tr>
		<td>${book.id}</td>
		<td>${book.book_title}</td>
		<td>${book.book_author}</td>
		<td>${book.book_genre}</td>
		<td>${book.book_cost}</td>
		<td><button type="button" onclick="removeBook(${book.id})">-</button></td>
		<td><button type="button" onclick="updateBook(${book.id})">Edit</button></td>
		</tr>`;
		});	
}

loadBook();

function removeBook(bookId){
	//alert(bookId);
	// logic to remove the book with matching bookId
	allBooks.forEach((book, index)=> {
		if(book.id == bookId){
			allBooks.splice(index, 1);
		}
	})
	// reload the data
	loadBook();
}

function addBook(){
	alert("add called");
	alert(allBooks[allBooks.length-1].id + 1);
	// construct on object literal
	var insertBook = {
			id: allBooks[allBooks.length-1].id + 1,
			book_title: document.getElementById("bookTitle").value,
			book_author: document.getElementById("bookAuthor").value ,
			book_genre: document.getElementById("bookGenre").value,
			book_cost: document.getElementById("bookCost").value,
			book_image_url: "",
			book_removed: false
	}
	
	// push the object literal into the array allBooks
	allBooks.push(insertBook);
	
	//reload the data
	loadBook();
	
}

function updateBook(bookId){
	
	
}

</script>
</body>
</html>